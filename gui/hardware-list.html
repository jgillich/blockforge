<hardware-list>
  <script>
    opts.hardware.cpus.forEach(function (cpu, i) {
      var threads = []
      for(var thread = 0; thread < cpu.virtual_cores; thread++) {
        threads[thread] = thread+1
      }
      opts.hardware.cpus[i].threads = threads
    })
  </script>
  <div class="columns">
    <div class="column is-4" each={ opts.hardware.cpus }>
      <div class="card">
        <div class="card-header">
          <p class="card-header-title">
            { model }
          </p>
          <div class="card-header-icon">
            <div class="field">
              <input id="switchRoundedDefault" type="checkbox" name="switchRoundedDefault" class="switch is-rounded" checked="checked">
              <label for="switchRoundedDefault"></label>
            </div>
          </div>
        </div>
        <div class="card-content has-text-centered">
          <h3 class="title is-3">{ cpuHashrate(index) }</h3>
          <h3 class="subtitle">H/s</h3>
        </div>
        <div class="card-footer">
          <div class="card-footer-item">
            <nav class="level" style="flex: 1">
              <div class="level-item has-text-centered">
                <div>
                  <p class="heading">Threads</p>
                  <p class="title">
                    <select class="select">
                      <option each={i in threads}>{i}</option>
                    </select>
                  </p>
                </div>
              </div>
              <div class="level-item has-text-centered">
                <div>
                  <p class="heading">Coin</p>
                  <p class="title">
                    <select class="select">
                      <option each={ coin, name in opts.config.coin }>{ name }</option>
                    </select>
                  </p>
                </div>
              </div>
            </nav>
          </div>
        </div>
      </div>
    </div>

    <div class="column is-4" each={ opts.hardware.gpus }>
      <div class="card">
        <div class="card-header">
          <p class="card-header-title">
            { model }
          </p>
          <div class="card-header-icon">
            <div class="field">
              <input id="asdasdasd" type="checkbox" class="switch is-rounded" checked="checked">
              <label for="asdasdasd"></label>
            </div>
          </div>
        </div>
        <div class="card-content has-text-centered">
          <h3 class="title is-3">1234</h3>
          <h3 class="subtitle">H/s</h3>
        </div>
        <div class="card-footer">
          <div class="card-footer-item">
            <nav class="level" style="flex: 1">
              <div class="level-item has-text-centered">
                <div>
                  <p class="heading">Intensity</p>
                  <p class="title">
                    <select class="select">
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                    </select>
                  </p>
                </div>
              </div>
              <div class="level-item has-text-centered">
                <div>
                  <p class="heading">Coin</p>
                  <p class="title">
                    <select class="select">
                      <option>xmr</option>
                      <option>eth</option>
                    </select>

                  </p>
                </div>
              </div>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    this.stats = []
    window.updateStats = function(stats) {
      this.stats = stats
      this.update()
    }.bind(this)

    cpuHashrate(index) {
      if (this.stats.length == 0) {
        return 0
      }

      var cpuStat = this.stats.cpu_stats.find((s) => s.index == index)

      if(!cpuStat) {
        return 0
      }

      return cpuStat.hashrate
    }

  </script>

</hardware-list>
